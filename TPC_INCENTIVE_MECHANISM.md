# TPC é¢„æµ‹æ¿€åŠ±æœºåˆ¶å®žçŽ°è¯¦è§£

## ðŸŽ¯ æ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•åŸºäºŽé¢„æµ‹å‡†ç¡®æ€§å®žçŽ°æ¿€åŠ±æœºåˆ¶ï¼Ÿ

TPC (æ—¶ç©ºé¢„çŸ¥å…±è¯†) çš„æ¿€åŠ±æœºåˆ¶æ˜¯ä¸€ä¸ª**çªç ´æ€§çš„åˆ›æ–°**ï¼Œå®ƒå°†ä¼ ç»Ÿçš„è´¨æŠ¼è¯æ˜Žæ‰©å±•åˆ°**è®¤çŸ¥æ™ºèƒ½è¯æ˜Ž**ã€‚

## ðŸ—ï¸ æ¿€åŠ±æœºåˆ¶æž¶æž„

### 1. å¤šç»´åº¦å¥–åŠ±è®¡ç®—å…¬å¼

```rust
total_reward = base_reward Ã— (
    accuracy_factor Ã— 0.5 +      // 50% æƒé‡ï¼šé¢„æµ‹å‡†ç¡®åº¦
    confidence_factor Ã— 0.2 +    // 20% æƒé‡ï¼šç½®ä¿¡åº¦
    consecutive_factor Ã— 0.15 +  // 15% æƒé‡ï¼šè¿žç»­æˆåŠŸ
    timeliness_factor Ã— 0.1 +    // 10% æƒé‡ï¼šæ—¶æ•ˆæ€§
    innovation_factor Ã— 0.05     // 5% æƒé‡ï¼šåˆ›æ–°åº¦
)
```

#### å‡†ç¡®åº¦å› å­ (Accuracy Factor)

- **å®Œå…¨åŒ¹é…**: 1.0 (äº¤æ˜“å“ˆå¸Œã€å‘é€æ–¹ã€æŽ¥æ”¶æ–¹å®Œå…¨æ­£ç¡®)
- **éƒ¨åˆ†åŒ¹é…**: 0.3-0.9 (æ ¹æ®åŒ¹é…ç¨‹åº¦çº¿æ€§è®¡ç®—)
- **æ¨¡ç³ŠåŒ¹é…**: 0.1-0.3 (äº¤æ˜“ç±»åž‹æˆ–æ¨¡å¼åŒ¹é…)
- **å®Œå…¨é”™è¯¯**: 0.0

#### ç½®ä¿¡åº¦å› å­ (Confidence Factor)

- èŠ‚ç‚¹æäº¤é¢„æµ‹æ—¶å£°æ˜Žçš„ç½®ä¿¡åº¦ (0.0-1.0)
- é«˜ç½®ä¿¡åº¦ + é«˜å‡†ç¡®åº¦ = è¶…é¢å¥–åŠ±
- é«˜ç½®ä¿¡åº¦ + ä½Žå‡†ç¡®åº¦ = åŠ é‡æƒ©ç½š

#### è¿žç»­æˆåŠŸå› å­ (Consecutive Factor)

```rust
consecutive_bonus = min(consecutive_count Ã— 0.1, 2.0) // æœ€å¤š200%å¥–åŠ±
```

#### æ—¶æ•ˆæ€§å› å­ (Timeliness Factor)

```rust
timeliness_score = max(0, 1.0 - (actual_arrival - predicted_time) / time_window)
```

#### åˆ›æ–°å› å­ (Innovation Factor)

- **å¸¸è§é¢„æµ‹ç±»åž‹**: 1.0x
- **ç¨€ç¼ºé¢„æµ‹ç±»åž‹**: 1.5x
- **å…¨æ–°é¢„æµ‹æ¨¡å¼**: 2.0x

### 2. åŠ¨æ€æƒ©ç½šæœºåˆ¶

#### æƒ©ç½šä¸¥é‡ç¨‹åº¦è®¡ç®—

```rust
penalty_severity = (threshold - accuracy) / threshold

match penalty_severity {
    0.0..0.2 => MinorWarning,           // è½»å¾®è­¦å‘Š
    0.2..0.4 => WeightReduction(10%),   // æƒé‡å‡å°‘
    0.4..0.6 => StakeSlashing(5%),      // è´¨æŠ¼æ‰£é™¤
    0.6..0.8 => TemporarySuspension,    // ä¸´æ—¶ç¦ç”¨
    0.8..1.0 => PermanentBan,           // æ°¸ä¹…å°ç¦
}
```

#### æ™ºèƒ½æƒ©ç½šé¿å…æœºåˆ¶

- **æ–°æ‰‹ä¿æŠ¤æœŸ**: å‰ 100 ä¸ªé¢„æµ‹åªæœ‰è­¦å‘Šï¼Œæ— å®žè´¨æƒ©ç½š
- **å­¦ä¹ æ›²çº¿è¡¥å¿**: é¢„æµ‹éš¾åº¦åŠ¨æ€è°ƒæ•´æƒ©ç½šåŠ›åº¦
- **æ¶æ„è¡Œä¸ºæ£€æµ‹**: åŒºåˆ†æ¶æ„æ”»å‡»å’ŒæŠ€èƒ½ä¸è¶³

### 3. æƒé‡åŠ¨æ€è°ƒæ•´ç®—æ³•

#### åŸºç¡€æƒé‡æ›´æ–°å…¬å¼

```rust
new_weight = old_weight Ã— (
    0.7 Ã— historical_accuracy +     // 70%ï¼šåŽ†å²è¡¨çŽ°
    0.2 Ã— recent_performance +      // 20%ï¼šè¿‘æœŸè¡¨çŽ°
    0.1 Ã— consistency_bonus         // 10%ï¼šä¸€è‡´æ€§å¥–åŠ±
)
```

#### æƒé‡è¾¹ç•ŒæŽ§åˆ¶

- **æœ€å¤§æƒé‡**: 10.0 (é˜²æ­¢æƒåŠ›è¿‡åº¦é›†ä¸­)
- **æœ€å°æƒé‡**: 0.1 (ä¿æŒåŸºæœ¬å‚ä¸Žèƒ½åŠ›)
- **æƒé‡è¡°å‡**: æ¯å‘¨è‡ªåŠ¨è¡°å‡ 1% (é˜²æ­¢åƒµåŒ–)

## ðŸš€ å®žé™…è¿è¡Œæµç¨‹

### é˜¶æ®µ 1ï¼šé¢„æµ‹æäº¤ (Prediction Submission)

```rust
// èŠ‚ç‚¹æäº¤é¢„æµ‹
let prediction = PredictionSubmission {
    prediction_id: "pred_20241201_001",
    validator_node: "node_alice",
    prediction_content: PredictionContent {
        predicted_tx_hash: "0xabc123...",
        predicted_from: "0x1234...",
        predicted_to: Some("0x5678..."),
        predicted_gas_limit: 21000,
        predicted_gas_price: 20_000_000_000, // 20 gwei
        prediction_type: PredictionType::UserBehavior,
    },
    confidence: 0.85, // 85% ç½®ä¿¡åº¦
    submitted_at: 1701398400,
};

// ç³»ç»Ÿè®¡ç®—åˆå§‹æƒé‡
let initial_weight = calculate_prediction_weight(
    prediction.confidence,           // 0.85
    node_profile.current_weight,     // 1.2
    node_profile.reputation_score    // 78.5
);
// initial_weight = 0.85 Ã— 1.2 Ã— 0.785 = 0.8007
```

### é˜¶æ®µ 2ï¼šé¢„æµ‹éªŒè¯ (Prediction Validation)

```rust
// å®žé™…äº¤æ˜“åˆ°è¾¾
let actual_tx = ActualTransaction {
    tx_hash: "0xabc123...",          // âœ… å®Œå…¨åŒ¹é…
    from: "0x1234...",               // âœ… å®Œå…¨åŒ¹é…
    to: Some("0x5678..."),           // âœ… å®Œå…¨åŒ¹é…
    gas_limit: 21000,               // âœ… å®Œå…¨åŒ¹é…
    gas_price: 19_500_000_000,      // â“ éƒ¨åˆ†åŒ¹é… (97.5%)
    arrived_at: 1701398450,         // 50ç§’åŽåˆ°è¾¾
};

// å‡†ç¡®åº¦è®¡ç®—
let accuracy_breakdown = AccuracyBreakdown {
    hash_match: 1.0,        // 100% åŒ¹é…
    from_match: 1.0,        // 100% åŒ¹é…
    to_match: 1.0,          // 100% åŒ¹é…
    data_match: 1.0,        // 100% åŒ¹é…
    gas_params_match: 0.975, // 97.5% åŒ¹é…
    timing_accuracy: 0.92,   // 92% åŒ¹é… (é¢„æµ‹50ç§’å†…)
};

let overall_accuracy = (1.0 + 1.0 + 1.0 + 1.0 + 0.975 + 0.92) / 6.0 = 0.982
```

### é˜¶æ®µ 3ï¼šå¥–åŠ±è®¡ç®— (Reward Calculation)

```rust
let base_reward = 1000; // 1000 tokens

// 1. å‡†ç¡®åº¦å¥–åŠ± (50% æƒé‡)
let accuracy_reward = base_reward Ã— 0.982 Ã— 2.0 Ã— 0.5 = 982 tokens

// 2. ç½®ä¿¡åº¦å¥–åŠ± (20% æƒé‡)
let confidence_reward = base_reward Ã— 0.85 Ã— 1.5 Ã— 0.2 = 255 tokens

// 3. è¿žç»­æˆåŠŸå¥–åŠ± (15% æƒé‡)
let consecutive_bonus = min(15 Ã— 0.1, 2.0) Ã— base_reward Ã— 0.15 = 150 tokens

// 4. æ—¶æ•ˆæ€§å¥–åŠ± (10% æƒé‡)
let timeliness_reward = base_reward Ã— 0.92 Ã— 0.1 = 92 tokens

// 5. åˆ›æ–°å¥–åŠ± (5% æƒé‡) - ç”¨æˆ·è¡Œä¸ºé¢„æµ‹è¾ƒç¨€ç¼º
let innovation_reward = base_reward Ã— 1.2 Ã— 0.05 = 60 tokens

// æ€»å¥–åŠ±
let total_reward = 982 + 255 + 150 + 92 + 60 = 1539 tokens
```

### é˜¶æ®µ 4ï¼šæƒé‡è°ƒæ•´ (Weight Adjustment)

```rust
// æƒé‡æ›´æ–°
let old_weight = 1.2;
let recent_accuracy = 0.982;
let historical_accuracy = 0.875; // åŽ†å²å¹³å‡
let consistency_bonus = 0.95;   // è¡¨çŽ°ç¨³å®š

let new_weight = old_weight Ã— (
    0.7 Ã— historical_accuracy +  // 0.7 Ã— 0.875 = 0.6125
    0.2 Ã— recent_accuracy +      // 0.2 Ã— 0.982 = 0.1964
    0.1 Ã— consistency_bonus      // 0.1 Ã— 0.95 = 0.095
);
// new_weight = 1.2 Ã— (0.6125 + 0.1964 + 0.095) = 1.2 Ã— 0.9039 = 1.085

// è¿žç»­æˆåŠŸè®¡æ•°æ›´æ–°
consecutive_successes += 1; // 15 â†’ 16
```

## ðŸ“Š é•¿æœŸæ¿€åŠ±ç­–ç•¥

### é‡Œç¨‹ç¢‘å¥–åŠ±ç³»ç»Ÿ

#### ðŸ† é’é“œçº§åˆ« (100 æ¬¡æˆåŠŸé¢„æµ‹)

- **å¥–åŠ±**: 10,000 tokens + æƒé‡+0.5
- **ç‰¹æƒ**: é¢„æµ‹ä¼˜å…ˆçº§æå‡

#### ðŸ¥ˆ ç™½é“¶çº§åˆ« (500 æ¬¡æˆåŠŸé¢„æµ‹ + 85%å¹³å‡å‡†ç¡®åº¦)

- **å¥–åŠ±**: 50,000 tokens + æƒé‡+1.0
- **ç‰¹æƒ**: é«˜çº§é¢„æµ‹ç®—æ³•è®¿é—®æƒ

#### ðŸ¥‡ é»„é‡‘çº§åˆ« (1000 æ¬¡æˆåŠŸé¢„æµ‹ + 90%å¹³å‡å‡†ç¡®åº¦)

- **å¥–åŠ±**: 100,000 tokens + æƒé‡+2.0
- **ç‰¹æƒ**: åè®®æ²»ç†æŠ•ç¥¨æƒ

#### ðŸ’Ž é’»çŸ³çº§åˆ« (è¿žç»­ 200 æ¬¡æˆåŠŸ + 95%å¹³å‡å‡†ç¡®åº¦)

- **å¥–åŠ±**: 500,000 tokens + æƒé‡+5.0
- **ç‰¹æƒ**: åè®®å‡çº§å‚ä¸Žæƒ

### åˆ›æ–°è´¡çŒ®å¥–åŠ±

#### æ–°é¢„æµ‹æ¨¡å¼å‘çŽ°

- **é¦–æ¬¡æˆåŠŸé¢„æµ‹æ–°æ¨¡å¼**: åŸºç¡€å¥–åŠ± Ã— 10
- **æ¨¡å¼è¢«ç½‘ç»œé‡‡ç”¨**: æ¯æ¬¡ä½¿ç”¨åˆ†æˆ 1%
- **æ¨¡å¼æŒç»­æœ‰æ•ˆ**: æ¯æœˆé¢å¤–å¥–åŠ±

## ðŸ›¡ï¸ é˜²ä½œæ¶æœºåˆ¶

### 1. é¢„æµ‹è´¨é‡é—¨æ§›

- è¿žç»­ 10 æ¬¡ä½ŽäºŽ 60%å‡†ç¡®åº¦ â†’ ä¸´æ—¶ç¦ç”¨ 1 å‘¨
- æ¶æ„å¤§é‡ä½Žè´¨é‡é¢„æµ‹ â†’ æƒé‡æ¸…é›¶ + è´¨æŠ¼æ‰£é™¤

### 2. å…±è°‹æ£€æµ‹

- å¤šèŠ‚ç‚¹æäº¤ç›¸åŒé¢„æµ‹ â†’ æ£€æµ‹æ˜¯å¦ååŒä½œå¼Š
- å¼‚å¸¸é«˜å‡†ç¡®åº¦æ¨¡å¼ â†’ æ·±åº¦å®¡æŸ¥æœºåˆ¶

### 3. è‡ªé€‚åº”éš¾åº¦è°ƒæ•´

- ç½‘ç»œæ•´ä½“å‡†ç¡®åº¦è¿‡é«˜ â†’ æé«˜é¢„æµ‹éš¾åº¦è¦æ±‚
- ç½‘ç»œæ•´ä½“å‡†ç¡®åº¦è¿‡ä½Ž â†’ é™ä½Žæƒ©ç½šåŠ›åº¦

## ðŸŽ® æ¸¸æˆåŒ–æœºåˆ¶

### æŽ’è¡Œæ¦œç³»ç»Ÿ

- **å‡†ç¡®åº¦æŽ’è¡Œæ¦œ**: æœˆåº¦/å¹´åº¦æœ€å‡†ç¡®é¢„æµ‹è€…
- **åˆ›æ–°æ¦œ**: æœ€å¤šæ–°æ¨¡å¼å‘çŽ°è€…
- **ç¨³å®šæ¦œ**: æœ€ç¨³å®šè¡¨çŽ°è€…
- **è´¡çŒ®æ¦œ**: ç½‘ç»œæ€»è´¡çŒ®å€¼æŽ’å

### æˆå°±ç³»ç»Ÿ

- ðŸŽ¯ **ç¥žå°„æ‰‹**: è¿žç»­ 50 æ¬¡>95%å‡†ç¡®åº¦
- âš¡ **é—ªç”µä¾ **: é¢„æµ‹æ—¶é—´è¯¯å·®<10 ç§’
- ðŸ”® **é¢„è¨€å®¶**: æå‰ 1 å°æ—¶æˆåŠŸé¢„æµ‹
- ðŸš€ **åˆ›æ–°è€…**: å‘çŽ° 3 ç§æ–°é¢„æµ‹æ¨¡å¼

## ðŸ“ˆ ç»æµŽæ¨¡åž‹å¯æŒç»­æ€§

### å¥–åŠ±æ± ç®¡ç†

- **åˆå§‹æ± **: 1,000,000 tokens
- **è¡¥å……æœºåˆ¶**: ç½‘ç»œæ‰‹ç»­è´¹çš„ 20%è¿›å…¥å¥–åŠ±æ± 
- **é€šèƒ€æŽ§åˆ¶**: å¹´å¢žå‘çŽ‡<5%

### ä»·å€¼æ•èŽ·

- é¢„æµ‹å‡†ç¡®åº¦æå‡ â†’ ç½‘ç»œå»¶è¿Ÿé™ä½Ž â†’ ç”¨æˆ·ä½“éªŒæå‡ â†’ ç½‘ç»œä»·å€¼å¢žé•¿
- å½¢æˆæ­£å‘é£žè½®æ•ˆåº”

## ðŸ”¬ æŠ€æœ¯åˆ›æ–°ç‚¹

### 1. æ—¶é—´ç»´åº¦çš„æ¿€åŠ±è®¾è®¡

ä¼ ç»ŸåŒºå—é“¾æ¿€åŠ±åŸºäºŽ"ç©ºé—´ç»´åº¦"(è°æŒæœ‰æ›´å¤š tokens)ï¼ŒTPC é¦–æ¬¡å¼•å…¥"æ—¶é—´ç»´åº¦"(è°èƒ½æ›´å‡†ç¡®é¢„æµ‹æœªæ¥)

### 2. è®¤çŸ¥æ™ºèƒ½è¯æ˜Ž (Proof of Cognitive Intelligence)

ä¸æ˜¯è¯æ˜Žè®¡ç®—èƒ½åŠ›æˆ–è´¢åŠ›ï¼Œè€Œæ˜¯è¯æ˜Ž**ç†è§£å’Œé¢„æµ‹èƒ½åŠ›**

### 3. è‡ªé€‚åº”æ¿€åŠ±å¼ºåº¦

æ ¹æ®ç½‘ç»œçŠ¶æ€åŠ¨æ€è°ƒæ•´æ¿€åŠ±å‚æ•°ï¼Œä¿æŒç”Ÿæ€å¹³è¡¡

## ðŸŒŸ ä¸Žä¼ ç»Ÿå…±è¯†å¯¹æ¯”

| ç»´åº¦         | PoW      | PoS      | **TPC**      |
| ------------ | -------- | -------- | ------------ |
| **æ¿€åŠ±åŸºç¡€** | ç®—åŠ›ç«žäº‰ | è´¢å¯Œè¯æ˜Ž | **æ™ºèƒ½è¯æ˜Ž** |
| **å‚ä¸Žé—¨æ§›** | é«˜(ç¡¬ä»¶) | ä¸­(ä»£å¸) | **ä½Ž(æ™ºåŠ›)** |
| **èƒ½è€—**     | æžé«˜     | ä½Ž       | **æžä½Ž**     |
| **å…¬å¹³æ€§**   | ç®—åŠ›å¯¡å¤´ | è´¢å¯Œå¯¡å¤´ | **æ™ºåŠ›å¤šå…ƒ** |
| **åˆ›æ–°é©±åŠ¨** | æ—        | å¼±       | **å¼º**       |

---

**ç»“è®º**: TPC çš„é¢„æµ‹æ¿€åŠ±æœºåˆ¶ä¸ä»…æ˜¯æŠ€æœ¯åˆ›æ–°ï¼Œæ›´æ˜¯**æ¿€åŠ±æœºåˆ¶è®¾è®¡çš„èŒƒå¼è½¬æ¢**ï¼Œä»Ž"èµ„æºè¯æ˜Ž"è½¬å‘"æ™ºèƒ½è¯æ˜Ž"ï¼Œä¸ºåŒºå—é“¾å…±è¯†æœºåˆ¶å¼€è¾Ÿäº†å…¨æ–°çš„å‘å±•æ–¹å‘ã€‚
